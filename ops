{"version":1,"ops":[{"type":3,"author":{"id":"969fe24ee4082d52977026a04efd671fd5270344"},"timestamp":1565199641,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDUxOTE5NDQxOQ==","github-url":"https://github.com/ajayyy/SponsorBlock/issues/87#issuecomment-519194419"},"message":"Does this interfere with content scripts running in tabs that aren't the active tab. If not, then yes, that's a great idea to switch.","files":null},{"type":6,"author":{"id":"969fe24ee4082d52977026a04efd671fd5270344"},"timestamp":1565199641,"metadata":{"github-id":"MDE1OlVzZXJDb250ZW50RWRpdDI2MDU3OTQ0MQ=="},"target":"e80c8f3a385768750c87e4d67827d5067936bdab9ba454239728f0f304fbceb9","message":"Does this interfere with content scripts running in tabs that aren't the active tab. If not, then yes, that's a great idea to switch. \n\nIf you are up to it, feel free to make a PR :)","files":null},{"type":3,"author":{"id":"dfc05bb8fa6d623104c8b57994efc7063679642c"},"timestamp":1565203505,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDUxOTIyMjEyMQ==","github-url":"https://github.com/ajayyy/SponsorBlock/issues/87#issuecomment-519222121"},"message":"\u003e Does this interfere with content scripts running in tabs that aren't the active tab.\n\nNo, content scripts continue running even if the tab is not active.\n\nHowever, the patch will be rather large because this extension `popup.js` function `runThePopup()` uses a lot of code like this:\n```\n  chrome.tabs.query({\n    active: true,\n    currentWindow: true\n  }, tabs =\u003e {\n    chrome.tabs.sendMessage(\n      tabs[0].id,\n      {message: '...'},\n```\nIt all needs to be rewrtten with `activeTab` instead.","files":null},{"type":3,"author":{"id":"937f912fe8c6fbde432505781ebabd3a403786f7"},"timestamp":1565210203,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDUxOTI1OTI4Mg==","github-url":"https://github.com/ajayyy/SponsorBlock/issues/87#issuecomment-519259282"},"message":"activeTab only seems to work when certain actions are taken and until the user navigates to a different origin.\nThis would work if you had a pageAction setup that you could click to invoke the extension\nhttps://developer.chrome.com/extensions/pageAction\nhttps://developer.chrome.com/extensions/activeTab#invoking-activeTab","files":null},{"type":3,"author":{"id":"dfc05bb8fa6d623104c8b57994efc7063679642c"},"timestamp":1565210401,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDUxOTI2MDM2Ng==","github-url":"https://github.com/ajayyy/SponsorBlock/issues/87#issuecomment-519260366"},"message":"@OfficialNoob \n\u003e activeTab can track your history\n\nYes, but only for pages that you explicitly envoke the extension on via `browserAction` or via a context menu. It has a much narrower scope than `tabs`. Currently, you use `chrome.tabs.onActivated`, which notifies you of all tab changes, even not related to YouTube (so, in theory, you could record all history including navigations and even just tab changes).","files":null},{"type":3,"author":{"id":"937f912fe8c6fbde432505781ebabd3a403786f7"},"timestamp":1565210830,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDUxOTI2MDU1MA==","github-url":"https://github.com/ajayyy/SponsorBlock/issues/87#issuecomment-519260550"},"message":"I removed that xD","files":null},{"type":6,"author":{"id":"937f912fe8c6fbde432505781ebabd3a403786f7"},"timestamp":1565210830,"metadata":{"github-id":"MDE1OlVzZXJDb250ZW50RWRpdDI2MDY3NjYwOA=="},"target":"2e46bfac04023cf44a98f2f22ab5a1b78155b8ea43b5bd5cac1e3bc338bde703","message":"activeTab tracking would only affect places where its been invoked","files":null},{"type":3,"author":{"id":"937f912fe8c6fbde432505781ebabd3a403786f7"},"timestamp":1565210512,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDUxOTI2MDk5Nw==","github-url":"https://github.com/ajayyy/SponsorBlock/issues/87#issuecomment-519260997"},"message":"I think Tab messaging should still work\nAs long as the extension gets invoked somehow","files":null},{"type":3,"author":{"id":"dfc05bb8fa6d623104c8b57994efc7063679642c"},"timestamp":1565210546,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDUxOTI2MTE5Nw==","github-url":"https://github.com/ajayyy/SponsorBlock/issues/87#issuecomment-519261197"},"message":"@OfficialNoob \n\u003e activeTab only seems to work when certain actions are taken and until the user navigates to a different origin.\n\nExactly.\n\n\u003e This would work if you had a pageAction setup that you could click to invoke the extension\n\nYes, when you click the extension icon you trigger that pageAction and it can query the currently active tab to display the relevant info.","files":null},{"type":3,"author":{"id":"969fe24ee4082d52977026a04efd671fd5270344"},"timestamp":1565212884,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDUxOTI3MzczMg==","github-url":"https://github.com/ajayyy/SponsorBlock/issues/88#issuecomment-519273732"},"message":"Right now the background script just waits for messages from the content script, so this should not be hard to implement. Good idea!","files":null},{"type":3,"author":{"id":"dfc05bb8fa6d623104c8b57994efc7063679642c"},"timestamp":1565531699,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDUyMDIzMDQwNg==","github-url":"https://github.com/ajayyy/SponsorBlock/issues/88#issuecomment-520230406"},"message":"Since the PR was merged, I'll close this issue now.\n\n@ajayyy FYI: The non-background script did reduce memory usage on my system somewhat, but extension still listens on all tab changes so still consumes resources when there are no YouTube videos open (on the main site or embedded). I still see the actual background process in the task manager often even when I do not have YouTube and do not have embedded videos. For me, the stack size fell from 3-4 MB to 2-3MB and overall process memory from  28MB to 19MB.\nThis happens because you still have an `chrome.tabs.onActivated` event listener that gets called each time any tab gets activated, so browser evicts the process from memory only if you do not do any tab changes and navigations within the same tab. The should be resolved when this event listener is removed.","files":null},{"type":3,"author":{"id":"969fe24ee4082d52977026a04efd671fd5270344"},"timestamp":1565538757,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDUyMDIzOTAwNQ==","github-url":"https://github.com/ajayyy/SponsorBlock/issues/88#issuecomment-520239005"},"message":"Thanks for the update and PR! 10 mb is a pretty good reduction in ram.","files":null},{"type":4,"author":{"id":"dfc05bb8fa6d623104c8b57994efc7063679642c"},"timestamp":1565540083,"metadata":{"github-id":"MDExOkNsb3NlZEV2ZW50MjU0ODcwNzU5NA=="},"status":2}]}