{"version":1,"ops":[{"type":3,"author":{"id":"969fe24ee4082d52977026a04efd671fd5270344"},"timestamp":1575775972,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDU2MjkwOTM1NQ==","github-url":"https://github.com/ajayyy/SponsorBlock/issues/184#issuecomment-562909355"},"message":"Thank you for considering this!\n\nRight now, the server costs are still \"free\" for me since I am running it off an old PC of mine, but I am planning on paying for some servers soon since the server load is growing and it would be nice to have some in Europe or Asia to make SponsorBlock just as fast there as in North America.\n\nLuckily, some generous people have already donated an amount that should cover servers costs for a bit, so I am not too worried about that. I am saving those donations for when I setup some more servers. I would rather not clutter the UI if I don't have to.\n\nHowever, I'll leave this issue open for people still interested in donating.\n\nhttps://www.paypal.me/ajayyy (other methods available if you contact me)\n\nThanks!","files":null},{"type":3,"author":{"id":"8e682db7433006d2fb0f6f5aeded50c287306d2f"},"timestamp":1575898728,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDU2MzI0MjIyMw==","github-url":"https://github.com/ajayyy/SponsorBlock/issues/184#issuecomment-563242223"},"message":"\u003e it would be nice to have some in Europe or Asia to make SponsorBlock just as fast there as in North America.\n\nOnly somewhat relevant, but I'm curious how are you planning on distributing the servers if the storage is a sqlite database? :)","files":null},{"type":3,"author":{"id":"969fe24ee4082d52977026a04efd671fd5270344"},"timestamp":1575898947,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDU2MzI0Mzc0Mg==","github-url":"https://github.com/ajayyy/SponsorBlock/issues/184#issuecomment-563243742"},"message":"I was going to make an API endpoint to get all new data past a certain timestamp","files":null},{"type":3,"author":{"id":"8e682db7433006d2fb0f6f5aeded50c287306d2f"},"timestamp":1575901627,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDU2MzI2MjYyMQ==","github-url":"https://github.com/ajayyy/SponsorBlock/issues/184#issuecomment-563262621"},"message":"So do you only want to distribute the read queries or also the writes? Cause then you'd need to also implement merging of votes etc which is kinda hard / annoying to do correctly.","files":null},{"type":3,"author":{"id":"462ff0074434c66e31341ff93db7b5034db95ff2"},"timestamp":1575904479,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDU2MzI4NTQwMA==","github-url":"https://github.com/ajayyy/SponsorBlock/issues/184#issuecomment-563285400"},"message":"I think a simple solution would be doing the write to one main server, and then do the reads from a server that geographically close. If a write is a few milliseconds slower than reads that's not a real problem.\nReads are done way more often, and are also more critical to the user experience. \nIS it the most elegant solution, no? is it sufficient, and straight foward I think so.","files":null},{"type":6,"author":{"id":"462ff0074434c66e31341ff93db7b5034db95ff2"},"timestamp":1575904479,"metadata":{"github-id":"MDE1OlVzZXJDb250ZW50RWRpdDMyMTgwMjkzNA=="},"target":"c86e38c086a6f99da0de856acc54970fcdce2879bcfe6158436af3bbb4657cfe","message":"I think a simple solution would be doing the write to one main server, and then do the reads from a server that geographically close. If a write is a few milliseconds slower than reads that's not a real problem.\nReads are done way more often, and are also more critical to the user experience. \nIS it the most elegant solution, no? is it sufficient, and straight forward I think so.","files":null},{"type":3,"author":{"id":"8e682db7433006d2fb0f6f5aeded50c287306d2f"},"timestamp":1575906018,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDU2MzI5NzE4OQ==","github-url":"https://github.com/ajayyy/SponsorBlock/issues/184#issuecomment-563297189"},"message":"Yep, sounds good. The only problem is if you have reads where having current written data is needed (e.g. if you add a sponsorship, then refresh the page it looks like it disappears and will only shop up N minutes later when the read server gets the new data)","files":null},{"type":3,"author":{"id":"462ff0074434c66e31341ff93db7b5034db95ff2"},"timestamp":1575906695,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDU2MzMwMjE1Nw==","github-url":"https://github.com/ajayyy/SponsorBlock/issues/184#issuecomment-563302157"},"message":"That is true, although what one could do, is that if no data was found on the localized server, the request is forwarded to the 'main' server.\nIf the data did exist there, the local server can forward it to the end user, and then simultaneously update its local database.\nIt would take a bit longer, but only for very recent entries.","files":null},{"type":3,"author":{"id":"8e682db7433006d2fb0f6f5aeded50c287306d2f"},"timestamp":1575906802,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDU2MzMwMjkzNQ==","github-url":"https://github.com/ajayyy/SponsorBlock/issues/184#issuecomment-563302935"},"message":"Not sure if that's a good idea since probably like 90% of requests to the server are \"not found\" requests since \"most\" videos aren't in the database and they aren't distinguishable from recently added ones","files":null},{"type":3,"author":{"id":"462ff0074434c66e31341ff93db7b5034db95ff2"},"timestamp":1575906945,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDU2MzMwNDA1MQ==","github-url":"https://github.com/ajayyy/SponsorBlock/issues/184#issuecomment-563304051"},"message":"That is correct. But For what I recall is that the original goal was caching, not load balancing.\nFor load balancing, this would indeed not reduce the load significantly from the main server. When the goal is caching, this will most definitely succeed.\nBut then again, seeing this is a very common problem, there might exist an easily deploy-able solution out there.","files":null},{"type":3,"author":{"id":"8e682db7433006d2fb0f6f5aeded50c287306d2f"},"timestamp":1575908328,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDU2MzMxNDUzMg==","github-url":"https://github.com/ajayyy/SponsorBlock/issues/184#issuecomment-563314532"},"message":"True. For just caching you could probably also just put cloudflare in front of the server and add a rule to force it to cache api responses and add a second uncached api.\n\n\u003e easily deploy-able solution out there.\n\nyep, but probably not without significant architecture changes (esp. regarding sqlite3).\ne.g. postgresql with one master server and replicated servers (don't even need to be synchronous, asynchronous replication is probably enough)","files":null},{"type":4,"author":{"id":"969fe24ee4082d52977026a04efd671fd5270344"},"timestamp":1577674591,"metadata":{"github-id":"MDExOkNsb3NlZEV2ZW50MjkxMzA3OTM0OQ=="},"status":2}]}